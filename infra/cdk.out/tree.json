{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.212.0"},"children":{"AiGmSleeperStack":{"id":"AiGmSleeperStack","path":"AiGmSleeperStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.212.0"},"children":{"SleeperDataBucket":{"id":"SleeperDataBucket","path":"AiGmSleeperStack/SleeperDataBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AiGmSleeperStack/SleeperDataBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"lifecycleConfiguration":{"rules":[{"id":"expire-old-versions","noncurrentVersionExpiration":{"noncurrentDays":90},"status":"Enabled"}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"versioningConfiguration":{"status":"Enabled"}}}}}},"PlayersSyncFn":{"id":"PlayersSyncFn","path":"AiGmSleeperStack/PlayersSyncFn","constructInfo":{"fqn":"@aws-cdk/aws-lambda-python-alpha.PythonFunction","version":"2.149.0-alpha.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"AiGmSleeperStack/PlayersSyncFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.212.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"AiGmSleeperStack/PlayersSyncFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.212.0","metadata":[]}},"Resource":{"id":"Resource","path":"AiGmSleeperStack/PlayersSyncFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"AiGmSleeperStack/PlayersSyncFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AiGmSleeperStack/PlayersSyncFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["SleeperDataBucket49FED3F2","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["SleeperDataBucket49FED3F2","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"PlayersSyncFnServiceRoleDefaultPolicy00649A74","roles":[{"Ref":"PlayersSyncFnServiceRoleBADCA420"}]}}}}}}},"Code":{"id":"Code","path":"AiGmSleeperStack/PlayersSyncFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.212.0"},"children":{"Stage":{"id":"Stage","path":"AiGmSleeperStack/PlayersSyncFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.212.0"}},"AssetBucket":{"id":"AssetBucket","path":"AiGmSleeperStack/PlayersSyncFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.212.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"AiGmSleeperStack/PlayersSyncFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"architectures":["arm64"],"code":{"s3Bucket":"cdk-hnb659fds-assets-484908222088-us-east-2","s3Key":"01d908f7f0710252d9764c1d843c532e850c0caf918b0cd99e5315576f0e1e13.zip"},"environment":{"variables":{"S3_BUCKET":{"Ref":"SleeperDataBucket49FED3F2"},"PLAYERS_S3_PREFIX":"sleeper/players","ROSTER_S3_PREFIX":"sleeper_sync","PLAYERS_CACHE_PATH":"/tmp/players_nfl.json"}},"handler":"sleeper_sync.players_lambda_handler","memorySize":512,"role":{"Fn::GetAtt":["PlayersSyncFnServiceRoleBADCA420","Arn"]},"runtime":"python3.12","timeout":120}}},"LogRetention":{"id":"LogRetention","path":"AiGmSleeperStack/PlayersSyncFn/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.212.0"},"children":{"Resource":{"id":"Resource","path":"AiGmSleeperStack/PlayersSyncFn/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.212.0"}}}},"LogGroup":{"id":"LogGroup","path":"AiGmSleeperStack/PlayersSyncFn/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.212.0","metadata":[]}}}},"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a":{"id":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","path":"AiGmSleeperStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Code":{"id":"Code","path":"AiGmSleeperStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.212.0"},"children":{"Stage":{"id":"Stage","path":"AiGmSleeperStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.212.0"}},"AssetBucket":{"id":"AssetBucket","path":"AiGmSleeperStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.212.0","metadata":[]}}}},"ServiceRole":{"id":"ServiceRole","path":"AiGmSleeperStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.212.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"AiGmSleeperStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.212.0","metadata":[]}},"Resource":{"id":"Resource","path":"AiGmSleeperStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"AiGmSleeperStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AiGmSleeperStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:PutRetentionPolicy","logs:DeleteRetentionPolicy"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB","roles":[{"Ref":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB"}]}}}}}}},"Resource":{"id":"Resource","path":"AiGmSleeperStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.212.0"}}}},"RosterSyncFn":{"id":"RosterSyncFn","path":"AiGmSleeperStack/RosterSyncFn","constructInfo":{"fqn":"@aws-cdk/aws-lambda-python-alpha.PythonFunction","version":"2.149.0-alpha.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"AiGmSleeperStack/RosterSyncFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.212.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"AiGmSleeperStack/RosterSyncFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.212.0","metadata":[]}},"Resource":{"id":"Resource","path":"AiGmSleeperStack/RosterSyncFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"AiGmSleeperStack/RosterSyncFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AiGmSleeperStack/RosterSyncFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["SleeperDataBucket49FED3F2","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["SleeperDataBucket49FED3F2","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"RosterSyncFnServiceRoleDefaultPolicyD7A2BFA4","roles":[{"Ref":"RosterSyncFnServiceRole129EFEB7"}]}}}}}}},"Code":{"id":"Code","path":"AiGmSleeperStack/RosterSyncFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.212.0"},"children":{"Stage":{"id":"Stage","path":"AiGmSleeperStack/RosterSyncFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.212.0"}},"AssetBucket":{"id":"AssetBucket","path":"AiGmSleeperStack/RosterSyncFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.212.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"AiGmSleeperStack/RosterSyncFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"architectures":["arm64"],"code":{"s3Bucket":"cdk-hnb659fds-assets-484908222088-us-east-2","s3Key":"01d908f7f0710252d9764c1d843c532e850c0caf918b0cd99e5315576f0e1e13.zip"},"environment":{"variables":{"S3_BUCKET":{"Ref":"SleeperDataBucket49FED3F2"},"PLAYERS_S3_PREFIX":"sleeper/players","ROSTER_S3_PREFIX":"sleeper_sync","PLAYERS_CACHE_PATH":"/tmp/players_nfl.json","USE_S3_PLAYERS":"1"}},"handler":"sleeper_sync.roster_lambda_handler","memorySize":512,"role":{"Fn::GetAtt":["RosterSyncFnServiceRole129EFEB7","Arn"]},"runtime":"python3.12","timeout":60}}},"LogRetention":{"id":"LogRetention","path":"AiGmSleeperStack/RosterSyncFn/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.212.0"},"children":{"Resource":{"id":"Resource","path":"AiGmSleeperStack/RosterSyncFn/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.212.0"}}}},"LogGroup":{"id":"LogGroup","path":"AiGmSleeperStack/RosterSyncFn/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.212.0","metadata":[]}}}},"PlayersSchedulerRole":{"id":"PlayersSchedulerRole","path":"AiGmSleeperStack/PlayersSchedulerRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.212.0","metadata":[]},"children":{"ImportPlayersSchedulerRole":{"id":"ImportPlayersSchedulerRole","path":"AiGmSleeperStack/PlayersSchedulerRole/ImportPlayersSchedulerRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.212.0","metadata":[]}},"Resource":{"id":"Resource","path":"AiGmSleeperStack/PlayersSchedulerRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"scheduler.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"AiGmSleeperStack/PlayersSchedulerRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AiGmSleeperStack/PlayersSchedulerRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["PlayersSyncFn64102A61","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PlayersSyncFn64102A61","Arn"]},":*"]]}]}],"Version":"2012-10-17"},"policyName":"PlayersSchedulerRoleDefaultPolicyB83BB1A4","roles":[{"Ref":"PlayersSchedulerRoleDDA4B1EE"}]}}}}}}},"PlayersDailySchedule":{"id":"PlayersDailySchedule","path":"AiGmSleeperStack/PlayersDailySchedule","constructInfo":{"fqn":"aws-cdk-lib.aws_scheduler.CfnSchedule","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Scheduler::Schedule","aws:cdk:cloudformation:props":{"description":"Daily Sleeper players map sync (timezone aware)","flexibleTimeWindow":{"mode":"OFF"},"scheduleExpression":"cron(5 6 * * ? *)","scheduleExpressionTimezone":"America/Los_Angeles","target":{"arn":{"Fn::GetAtt":["PlayersSyncFn64102A61","Arn"]},"roleArn":{"Fn::GetAtt":["PlayersSchedulerRoleDDA4B1EE","Arn"]},"input":"{}"}}}},"RosterSchedulerRole":{"id":"RosterSchedulerRole","path":"AiGmSleeperStack/RosterSchedulerRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.212.0","metadata":[]},"children":{"ImportRosterSchedulerRole":{"id":"ImportRosterSchedulerRole","path":"AiGmSleeperStack/RosterSchedulerRole/ImportRosterSchedulerRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.212.0","metadata":[]}},"Resource":{"id":"Resource","path":"AiGmSleeperStack/RosterSchedulerRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"scheduler.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"AiGmSleeperStack/RosterSchedulerRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AiGmSleeperStack/RosterSchedulerRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["RosterSyncFn215FEF8F","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["RosterSyncFn215FEF8F","Arn"]},":*"]]}]}],"Version":"2012-10-17"},"policyName":"RosterSchedulerRoleDefaultPolicy7E8A5031","roles":[{"Ref":"RosterSchedulerRole5360B5C7"}]}}}}}}},"RosterEveryNMinutes":{"id":"RosterEveryNMinutes","path":"AiGmSleeperStack/RosterEveryNMinutes","constructInfo":{"fqn":"aws-cdk-lib.aws_scheduler.CfnSchedule","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Scheduler::Schedule","aws:cdk:cloudformation:props":{"description":"Roster sync every 10 minutes","flexibleTimeWindow":{"mode":"OFF"},"scheduleExpression":"rate(10 minutes)","target":{"arn":{"Fn::GetAtt":["RosterSyncFn215FEF8F","Arn"]},"roleArn":{"Fn::GetAtt":["RosterSchedulerRole5360B5C7","Arn"]},"input":"{\"username\":\"tyler48\",\"season\":2025}"}}}},"BucketName":{"id":"BucketName","path":"AiGmSleeperStack/BucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.212.0"}},"PlayersFnName":{"id":"PlayersFnName","path":"AiGmSleeperStack/PlayersFnName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.212.0"}},"RosterFnName":{"id":"RosterFnName","path":"AiGmSleeperStack/RosterFnName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.212.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"AiGmSleeperStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"AiGmSleeperStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.212.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"AiGmSleeperStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.212.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"AiGmSleeperStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.212.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}